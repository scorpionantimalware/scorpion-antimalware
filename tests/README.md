# Scorpion Anti-malware Tests

# Building Tests

1. Get Gtest.
```bash
git clone https://github.com/google/googletest.git
```

2. Change directory to the root of googletest.
```bash
cd googletest/
```

3. Make a new directory for CMake build output.
```bash
mkdir build/
```

4. Change directory.
```bash
cd .build/
```

5. Run CMake.
```bash
cmake .. -G "Visual Studio 17 2022" -DBUILD_SHARED_LIBS=ON
```

6. Build GTest libraries.
```bash
cmake --build .
```

7. Install the libraries. Default location is ``C:/Program Files (x86)/googletest-distribution``. Note that you don't have write permission inside ``Program Files (x86)`` directory so this command will fail so you must run the command line as administrator.
```bash
cmake --install . --config Debug
```

8. Add ``C:/Program Files (x86)/googletest-distribution/bin`` to your PATH.

9. Change directory to SAM's root.
```bash
cd scorpion-antimalware/
```

10. Make a new directory for CMake build output.
```bash
mkdir build/
```

11. Change directory.
```bash
cd .build/
```

12. Now build SAM with ``BUILD_TESTS`` macro equals to ``ON`` and provide the path of GTest to ``CMAKE_PREFIX_PATH``.
```bash
cmake .. -G "Visual Studio 17 2022" -DLINK_CONSOLE=OFF -DBUILD_TESTS=ON -DCMAKE_PREFIX_PATH="C:/Program Files (x86)/googletest-distribution/lib/cmake/GTest"
``` 
