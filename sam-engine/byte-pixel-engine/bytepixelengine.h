#ifndef SAM_BYTE_PIXEL_ENGINE_H
#define SAM_BYTE_PIXEL_ENGINE_H

// // It is recommended to always define PY_SSIZE_T_CLEAN before including Python.h. See https://docs.python.org/3/c-api/arg.html#arg-parsing for a description of this macro.
// #define PY_SSIZE_T_CLEAN

// // Since Python may define some pre-processor definitions which affect the standard headers on some systems, you must include Python.h before any standard headers are included.
// #include <Python.h>

#include <pybind11/embed.h>
namespace py = pybind11;

/**
 * @brief The directory containing the Python module
*/
#ifndef BYTE_PIXEL_ENGINE_SCRIPTS_DIR
#error "BYTE_PIXEL_ENGINE_SCRIPTS_DIR is not defined"
#endif

#ifndef STATIC_CNN_COLORMAP
#error "STATIC_CNN_COLORMAP is not defined"
#endif

#include <string>
#include <vector>

class BytePixelEngine {
 public:
  BytePixelEngine();
  ~BytePixelEngine();

  bool get_byte_pixel_features(const std::string& pe_file_path,  std::vector<float>& features_buffer);

  private:
  PyObject* pModule;
  PyObject* pFunc;
}; // class BytePixelEngine

#endif // SAM_BYTE_PIXEL_ENGINE_H
